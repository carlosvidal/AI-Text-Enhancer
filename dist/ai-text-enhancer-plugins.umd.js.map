{"version":3,"file":"ai-text-enhancer-plugins.umd.js","sources":["../src/plugins/ckeditor-plugin.js","../src/plugins/froala-plugin.js","../src/plugins/quill-plugin.js","../src/plugins/tinymce-plugin.js"],"sourcesContent":["// src/plugins/ckeditor-plugin.js (versión corregida)\n\n/**\n * Plugin para CKEditor 5 que añade un botón para mejorar el texto con IA\n * @param {Object} options - Opciones de configuración\n * @param {string} options.enhancerId - ID del componente ai-text-enhancer\n * @param {string} options.buttonTooltip - Texto del tooltip del botón\n * @returns {Function} - Inicializador del plugin\n */\nexport function CKEditorPlugin(options = {}) {\n  const { enhancerId, buttonTooltip = \"Mejorar con IA\" } = options;\n\n  // Esta función se debería pasar como callback a extraPlugins\n  return function initPlugin(editor) {\n    // Añadir un botón a la barra de herramientas de forma directa\n    // En lugar de usar la API ButtonView\n\n    editor.ui.componentFactory.add(\"aienhancer\", () => {\n      // Crear un botón manualmente\n      const button = document.createElement(\"button\");\n      button.innerHTML = `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\"/>\n        <path d=\"m14 7 3 3\"/>\n      </svg>`;\n      button.title = buttonTooltip;\n      button.className = \"ck ck-button\";\n\n      // Añadir estilos CSS\n      button.style.cssText = `\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        background: #f0f0f0;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        padding: 4px;\n        cursor: pointer;\n        margin: 2px;\n      `;\n\n      // Añadir eventos\n      button.addEventListener(\"click\", () => {\n        const enhancer = document.getElementById(enhancerId);\n        if (enhancer && typeof enhancer.openModal === \"function\") {\n          enhancer.openModal();\n        } else {\n          console.error(\n            `AI Text Enhancer with ID \"${enhancerId}\" not found or not initialized`\n          );\n        }\n      });\n\n      // Devolver el elemento DOM (CKEditor lo añadirá a la UI)\n      return button;\n    });\n\n    // De manera alternativa, podemos observar cuando la barra de herramientas está lista\n    // y añadir nuestro botón directamente\n    setTimeout(() => {\n      try {\n        // Buscar la barra de herramientas de CKEditor\n        const editor_element = document.querySelector(\".ck-editor__main\");\n        if (editor_element) {\n          const toolbar = document.querySelector(\".ck-toolbar\");\n          if (toolbar) {\n            // Crear botón si no existe ya\n            if (!toolbar.querySelector(\".ai-enhancer-button\")) {\n              const button = document.createElement(\"button\");\n              button.className = \"ck ck-button ai-enhancer-button\";\n              button.innerHTML = `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n                <path d=\"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\"/>\n                <path d=\"m14 7 3 3\"/>\n              </svg>`;\n              button.title = buttonTooltip;\n\n              button.addEventListener(\"click\", () => {\n                const enhancer = document.getElementById(enhancerId);\n                if (enhancer && typeof enhancer.openModal === \"function\") {\n                  enhancer.openModal();\n                } else {\n                  console.error(\n                    `AI Text Enhancer with ID \"${enhancerId}\" not found or not initialized`\n                  );\n                }\n              });\n\n              toolbar.appendChild(button);\n              console.log(\"CKEditor AI enhancer button added\");\n            }\n          }\n        }\n      } catch (error) {\n        console.error(\"Error adding button to CKEditor:\", error);\n      }\n    }, 500);\n  };\n}\n","// src/plugins/froala-plugin.js (versión corregida)\n\n/**\n * Plugin para Froala Editor que añade un botón para mejorar el texto con IA\n * @param {Object} options - Opciones de configuración\n * @param {string} options.enhancerId - ID del componente ai-text-enhancer\n * @param {string} options.buttonTooltip - Texto del tooltip del botón\n * @returns {Object} - Plugin de Froala\n */\nexport function FroalaPlugin(options = {}) {\n  const { enhancerId, buttonTooltip = \"Mejorar con IA\" } = options;\n\n  // Esta función se llama para registrar el plugin\n  return function manualPlugin() {\n    // No usamos la estructura estándar de plugin de Froala\n    // En su lugar, añadimos manualmente un botón cuando Froala esté listo\n\n    setTimeout(() => {\n      try {\n        // Buscar la barra de herramientas de Froala\n        const froalaContainer = document.querySelector(\".fr-box\");\n        if (!froalaContainer) {\n          console.warn(\"Froala container not found\");\n          return;\n        }\n\n        const toolbar = froalaContainer.querySelector(\".fr-toolbar\");\n        if (!toolbar) {\n          console.warn(\"Froala toolbar not found\");\n          return;\n        }\n\n        // Verificar si ya existe nuestro botón\n        if (toolbar.querySelector(\".ai-enhancer-button\")) {\n          return;\n        }\n\n        // Crear un nuevo grupo de botones\n        const buttonGroup = document.createElement(\"div\");\n        buttonGroup.className = \"fr-btn-grp\";\n\n        // Crear el botón\n        const button = document.createElement(\"button\");\n        button.className = \"fr-command fr-btn ai-enhancer-button\";\n        button.title = buttonTooltip;\n        button.innerHTML = `\n          <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n            <path d=\"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\"/>\n            <path d=\"m14 7 3 3\"/>\n          </svg>\n        `;\n\n        // Añadir evento\n        button.addEventListener(\"click\", () => {\n          const enhancer = document.getElementById(enhancerId);\n          if (enhancer && typeof enhancer.openModal === \"function\") {\n            enhancer.openModal();\n          } else {\n            console.error(\n              `AI Text Enhancer with ID \"${enhancerId}\" not found or not initialized`\n            );\n          }\n        });\n\n        // Añadir botón al grupo\n        buttonGroup.appendChild(button);\n\n        // Añadir grupo a la barra de herramientas\n        const lastGroup = toolbar.querySelector(\".fr-btn-grp:last-child\");\n        if (lastGroup) {\n          toolbar.insertBefore(buttonGroup, lastGroup.nextSibling);\n        } else {\n          toolbar.appendChild(buttonGroup);\n        }\n\n        console.log(\"Froala AI enhancer button added successfully\");\n      } catch (error) {\n        console.error(\"Error adding button to Froala:\", error);\n      }\n    }, 1000); // Dar tiempo a Froala para inicializarse completamente\n  };\n}\n","// src/plugins/quill-plugin.js (versión corregida)\n\n/**\n * Plugin para Quill que añade un botón para mejorar el texto con IA\n * @param {Object} options - Opciones de configuración\n * @param {string} options.enhancerId - ID del componente ai-text-enhancer\n * @param {string} options.buttonTooltip - Texto del tooltip del botón\n * @param {string} options.iconHTML - HTML del icono del botón\n * @returns {Function} - Función para registrar el plugin\n */\nexport function QuillPlugin(options = {}) {\n  const {\n    enhancerId,\n    buttonTooltip = \"Mejorar con IA\",\n    iconHTML = `<svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\"/>\n      <path d=\"m14 7 3 3\"/>\n    </svg>`,\n  } = options;\n\n  return function (quill) {\n    // Asegurarnos de que Quill esté completamente inicializado\n    setTimeout(() => {\n      try {\n        // Obtener la barra de herramientas con una búsqueda más robusta\n        const container = quill.container;\n        const toolbar = container.querySelector(\".ql-toolbar\");\n\n        if (!toolbar) {\n          console.warn(\"Quill toolbar not found, waiting...\");\n\n          // Intentar de nuevo en 500ms\n          setTimeout(() => {\n            const retryToolbar = container.querySelector(\".ql-toolbar\");\n            if (retryToolbar) {\n              addButton(retryToolbar);\n            } else {\n              console.error(\"Quill toolbar not found after retry\");\n            }\n          }, 500);\n\n          return;\n        }\n\n        addButton(toolbar);\n      } catch (error) {\n        console.error(\"Error initializing Quill plugin:\", error);\n      }\n    }, 100);\n\n    // Función para añadir el botón a la barra de herramientas\n    function addButton(toolbar) {\n      // Crear el botón\n      const button = document.createElement(\"button\");\n      button.className = \"ql-ai-enhancer\";\n      button.innerHTML = iconHTML;\n      button.title = buttonTooltip;\n\n      // Estilizar el botón\n      button.style.cssText = `\n        display: inline-block;\n        height: 24px;\n        width: 28px;\n        background: transparent;\n        border: none;\n        cursor: pointer;\n        padding: 3px;\n        position: relative;\n      `;\n\n      // Escuchar clics\n      button.addEventListener(\"click\", () => {\n        const enhancer = document.getElementById(enhancerId);\n        if (enhancer && typeof enhancer.openModal === \"function\") {\n          enhancer.openModal();\n        } else {\n          console.error(\n            `AI Text Enhancer with ID \"${enhancerId}\" not found or not initialized`\n          );\n        }\n      });\n\n      // Añadir el botón a la barra de herramientas\n      toolbar.appendChild(button);\n      console.log(\"Quill AI enhancer button added successfully\");\n    }\n\n    // Devolver funciones del plugin\n    return {\n      destroy: function () {\n        const button = quill.container.querySelector(\".ql-ai-enhancer\");\n        if (button) {\n          button.removeEventListener(\"click\");\n          button.parentNode.removeChild(button);\n        }\n      },\n    };\n  };\n}\n","/**\n * Plugin mejorado para TinyMCE que añade un botón para mejorar el texto con IA\n * Esta versión corrige problemas de integración con AITextEnhancer\n *\n * @param {Object} options - Opciones de configuración\n * @param {string} options.enhancerId - ID del componente ai-text-enhancer\n * @param {string} options.buttonTooltip - Texto del tooltip del botón\n * @param {string} options.buttonIcon - Icono SVG para el botón\n * @returns {Object} - Plugin de TinyMCE\n */\nexport function TinyMCEPlugin(options = {}) {\n  const {\n    enhancerId,\n    buttonTooltip = \"Mejorar con IA\",\n    buttonText = \"IA\",\n    buttonIcon = '<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\"/><path d=\"m14 7 3 3\"/></svg>',\n    debug = false,\n  } = options;\n\n  // Función para registrar el plugin\n  return function (editor) {\n    // Registrar el botón en TinyMCE\n    editor.ui.registry.addButton(\"aienhancer\", {\n      icon: \"magic\", // Icono predefinido o usar tu SVG personalizado\n      tooltip: buttonTooltip,\n      text: buttonText,\n      onAction: function () {\n        if (debug) {\n          console.log(\"[TinyMCEPlugin] AI enhancer button clicked\");\n        }\n\n        // Guardar la selección actual\n        const currentSelection = editor.selection.getContent();\n        const currentContent = editor.getContent();\n\n        // Buscar el componente enhancer\n        const enhancer = document.getElementById(enhancerId);\n        if (!enhancer) {\n          console.error(\n            `[TinyMCEPlugin] AI Text Enhancer with ID \"${enhancerId}\" not found`\n          );\n          return;\n        }\n\n        // Verificar si el componente está inicializado adecuadamente\n        if (\n          !enhancer.isInitialized &&\n          typeof enhancer.initializeComponents === \"function\"\n        ) {\n          console.log(\n            \"[TinyMCEPlugin] Initializing AI Text Enhancer component\"\n          );\n          enhancer.initializeComponents();\n        }\n\n        // Asegurar que el adaptador del editor esté configurado correctamente\n        if (enhancer.editorAdapter) {\n          // Sobreescribir métodos del adaptador para garantizar la correcta integración\n          enhancer.editorAdapter.getContent = function () {\n            return editor.getContent();\n          };\n\n          enhancer.editorAdapter.setContent = function (content) {\n            if (content) {\n              editor.setContent(content);\n              editor.undoManager.add();\n              return true;\n            }\n            return false;\n          };\n\n          if (debug) {\n            console.log(\"[TinyMCEPlugin] Editor adapter methods overridden\");\n          }\n        } else {\n          console.warn(\n            \"[TinyMCEPlugin] Editor adapter not available in enhancer\"\n          );\n        }\n\n        // Configurar un listener para el evento 'responseUse'\n        const handleResponseUse = (event) => {\n          const { responseId } = event.detail || {};\n\n          if (debug) {\n            console.log(\n              \"[TinyMCEPlugin] Received responseUse event:\",\n              event.detail\n            );\n          }\n\n          // Obtener la respuesta del historial\n          if (enhancer.responseHistory) {\n            const response = enhancer.responseHistory.getResponse(responseId);\n\n            if (response && response.content) {\n              if (debug) {\n                console.log(\"[TinyMCEPlugin] Setting content from response:\", {\n                  id: responseId,\n                  contentLength: response.content.length,\n                });\n              }\n\n              // Insertar el contenido en TinyMCE\n              editor.setContent(response.content);\n              editor.undoManager.add();\n\n              // Cerrar el modal después de una breve pausa\n              setTimeout(() => {\n                const modal = enhancer.shadowRoot.querySelector(\".modal\");\n                if (modal) {\n                  modal.classList.remove(\"open\");\n                }\n              }, 100);\n\n              // Eliminar este listener después de usarlo\n              enhancer.removeEventListener(\"responseUse\", handleResponseUse);\n            } else {\n              console.warn(\n                \"[TinyMCEPlugin] Response not found or content empty:\",\n                responseId\n              );\n            }\n          } else {\n            console.warn(\n              \"[TinyMCEPlugin] Response history not available in enhancer\"\n            );\n          }\n        };\n\n        // Añadir listener para capturar el evento responseUse\n        enhancer.addEventListener(\"responseUse\", handleResponseUse);\n\n        // También configurar un listener para el evento 'ai-content-generated'\n        const handleContentGenerated = (event) => {\n          const generatedContent = event.detail?.content;\n\n          if (debug) {\n            console.log(\n              \"[TinyMCEPlugin] Received ai-content-generated event:\",\n              event.detail\n            );\n          }\n\n          // Insertar el contenido en TinyMCE\n          if (generatedContent) {\n            editor.setContent(generatedContent);\n            editor.undoManager.add();\n\n            // Eliminar este listener después de usarlo\n            enhancer.removeEventListener(\n              \"ai-content-generated\",\n              handleContentGenerated\n            );\n          }\n        };\n\n        // Añadir listener para el evento ai-content-generated\n        enhancer.addEventListener(\n          \"ai-content-generated\",\n          handleContentGenerated\n        );\n\n        // Abrir el modal\n        if (typeof enhancer.openModal === \"function\") {\n          enhancer.openModal();\n        } else {\n          console.error(\n            \"[TinyMCEPlugin] openModal method not available on enhancer\"\n          );\n        }\n      },\n    });\n\n    // Añadir un comando para insertar contenido\n    editor.addCommand(\"insertAIContent\", function (content) {\n      if (content) {\n        editor.setContent(content);\n        editor.undoManager.add();\n\n        if (debug) {\n          console.log(\"[TinyMCEPlugin] Content inserted via command\");\n        }\n      }\n    });\n\n    // Registrar el plugin (información de metadatos)\n    return {\n      getMetadata: function () {\n        return {\n          name: \"AI Text Enhancer\",\n          url: \"https://github.com/yourusername/ai-text-enhancer\",\n        };\n      },\n    };\n  };\n}\n"],"names":["options","enhancerId","buttonTooltip","editor","ui","componentFactory","add","button","document","createElement","innerHTML","title","className","style","cssText","addEventListener","enhancer","getElementById","openModal","console","error","setTimeout","querySelector","toolbar","appendChild","log","froalaContainer","warn","buttonGroup","lastGroup","insertBefore","nextSibling","iconHTML","quill","addButton","container","retryToolbar","destroy","removeEventListener","parentNode","removeChild","buttonText","buttonIcon","debug","registry","icon","tooltip","text","onAction","selection","getContent","isInitialized","initializeComponents","editorAdapter","setContent","content","undoManager","handleResponseUse","event","responseId","detail","responseHistory","response","getResponse","id","contentLength","length","modal","shadowRoot","classList","remove","handleContentGenerated","generatedContent","_a","addCommand","getMetadata","name","url"],"mappings":"8QASgB,SAAeA,EAAU,IACvC,MAAMC,WAAEA,EAAAC,cAAYA,EAAgB,kBAAqBF,EAGlD,OAAA,SAAoBG,GAIzBA,EAAOC,GAAGC,iBAAiBC,IAAI,cAAc,KAErC,MAAAC,EAASC,SAASC,cAAc,UAkC/B,OAjCPF,EAAOG,UAAY,sSAInBH,EAAOI,MAAQT,EACfK,EAAOK,UAAY,eAGnBL,EAAOM,MAAMC,QAAU,6QAahBP,EAAAQ,iBAAiB,SAAS,KACzB,MAAAC,EAAWR,SAASS,eAAehB,GACrCe,GAA0C,mBAAvBA,EAASE,UAC9BF,EAASE,YAEDC,QAAAC,MACN,6BAA6BnB,kCAEzC,IAIaM,CAAA,IAKTc,YAAW,KACL,IAGF,GADuBb,SAASc,cAAc,oBAC1B,CACZ,MAAAC,EAAUf,SAASc,cAAc,eACvC,GAAIC,IAEGA,EAAQD,cAAc,uBAAwB,CAC3C,MAAAf,EAASC,SAASC,cAAc,UACtCF,EAAOK,UAAY,kCACnBL,EAAOG,UAAY,2RAInBH,EAAOI,MAAQT,EAERK,EAAAQ,iBAAiB,SAAS,KACzB,MAAAC,EAAWR,SAASS,eAAehB,GACrCe,GAA0C,mBAAvBA,EAASE,UAC9BF,EAASE,YAEDC,QAAAC,MACN,6BAA6BnB,kCAEjD,IAGcsB,EAAQC,YAAYjB,GACpBY,QAAQM,IAAI,oCAC1B,CAEA,CACO,OAAQL,GACCD,QAAAC,MAAM,mCAAoCA,EAC1D,IACO,IACJ,CACH,iBCvFgB,SAAapB,EAAU,IACrC,MAAMC,WAAEA,EAAAC,cAAYA,EAAgB,kBAAqBF,EAGzD,OAAO,WAILqB,YAAW,KACL,IAEI,MAAAK,EAAkBlB,SAASc,cAAc,WAC/C,IAAKI,EAEH,YADAP,QAAQQ,KAAK,8BAIT,MAAAJ,EAAUG,EAAgBJ,cAAc,eAC9C,IAAKC,EAEH,YADAJ,QAAQQ,KAAK,4BAKX,GAAAJ,EAAQD,cAAc,uBACxB,OAII,MAAAM,EAAcpB,SAASC,cAAc,OAC3CmB,EAAYhB,UAAY,aAGlB,MAAAL,EAASC,SAASC,cAAc,UACtCF,EAAOK,UAAY,uCACnBL,EAAOI,MAAQT,EACfK,EAAOG,UAAY,qSAQZH,EAAAQ,iBAAiB,SAAS,KACzB,MAAAC,EAAWR,SAASS,eAAehB,GACrCe,GAA0C,mBAAvBA,EAASE,UAC9BF,EAASE,YAEDC,QAAAC,MACN,6BAA6BnB,kCAE3C,IAIQ2B,EAAYJ,YAAYjB,GAGlB,MAAAsB,EAAYN,EAAQD,cAAc,0BACpCO,EACMN,EAAAO,aAAaF,EAAaC,EAAUE,aAE5CR,EAAQC,YAAYI,GAGtBT,QAAQM,IAAI,+CACb,OAAQL,GACCD,QAAAC,MAAM,iCAAkCA,EACxD,IACO,IACJ,CACH,gBCvEgB,SAAYpB,EAAU,IAC9B,MAAAC,WACJA,EAAAC,cACAA,EAAgB,iBAAA8B,SAChBA,EAAW,iSAIThC,EAEJ,OAAO,SAAUiC,GA+Bf,SAASC,EAAUX,GAEX,MAAAhB,EAASC,SAASC,cAAc,UACtCF,EAAOK,UAAY,iBACnBL,EAAOG,UAAYsB,EACnBzB,EAAOI,MAAQT,EAGfK,EAAOM,MAAMC,QAAU,+NAYhBP,EAAAQ,iBAAiB,SAAS,KACzB,MAAAC,EAAWR,SAASS,eAAehB,GACrCe,GAA0C,mBAAvBA,EAASE,UAC9BF,EAASE,YAEDC,QAAAC,MACN,6BAA6BnB,kCAEzC,IAIMsB,EAAQC,YAAYjB,GACpBY,QAAQM,IAAI,8CAClB,CAGW,OAlEPJ,YAAW,KACL,IAEF,MAAMc,EAAYF,EAAME,UAClBZ,EAAUY,EAAUb,cAAc,eAExC,IAAKC,EAaH,OAZAJ,QAAQQ,KAAK,4CAGbN,YAAW,KACH,MAAAe,EAAeD,EAAUb,cAAc,eACzCc,EACFF,EAAUE,GAEVjB,QAAQC,MAAM,sCAC5B,GACa,KAKLc,EAAUX,EACX,OAAQH,GACCD,QAAAC,MAAM,mCAAoCA,EAC1D,IACO,KAwCI,CACLiB,QAAS,WACP,MAAM9B,EAAS0B,EAAME,UAAUb,cAAc,mBACzCf,IACFA,EAAO+B,oBAAoB,SACpB/B,EAAAgC,WAAWC,YAAYjC,GAEjC,EAEJ,CACH,kBCxFgB,SAAcP,EAAU,IAChC,MAAAC,WACJA,EAAAC,cACAA,EAAgB,iBAAAuC,WAChBA,EAAa,KAAAC,WACbA,EAAa,0RAAAC,MACbA,GAAQ,GACN3C,EAGJ,OAAO,SAAUG,GAuKR,OArKAA,EAAAC,GAAGwC,SAASV,UAAU,aAAc,CACzCW,KAAM,QACNC,QAAS5C,EACT6C,KAAMN,EACNO,SAAU,WACJL,GACFxB,QAAQM,IAAI,8CAIWtB,EAAO8C,UAAUC,aACnB/C,EAAO+C,aAGxB,MAAAlC,EAAWR,SAASS,eAAehB,GACzC,IAAKe,EAIH,YAHQG,QAAAC,MACN,6CAA6CnB,gBAO9Ce,EAASmC,eAC+B,mBAAlCnC,EAASoC,uBAERjC,QAAAM,IACN,2DAEFT,EAASoC,wBAIPpC,EAASqC,eAEFrC,EAAAqC,cAAcH,WAAa,WAClC,OAAO/C,EAAO+C,YACf,EAEQlC,EAAAqC,cAAcC,WAAa,SAAUC,GAC5C,QAAIA,IACFpD,EAAOmD,WAAWC,GAClBpD,EAAOqD,YAAYlD,OACZ,EAGV,EAEGqC,GACFxB,QAAQM,IAAI,sDAGNN,QAAAQ,KACN,4DAKE,MAAA8B,EAAqBC,IACzB,MAAMC,WAAEA,GAAeD,EAAME,QAAU,CAAE,EAUzC,GARIjB,GACMxB,QAAAM,IACN,8CACAiC,EAAME,QAKN5C,EAAS6C,gBAAiB,CAC5B,MAAMC,EAAW9C,EAAS6C,gBAAgBE,YAAYJ,GAElDG,GAAYA,EAASP,SACnBZ,GACFxB,QAAQM,IAAI,iDAAkD,CAC5DuC,GAAIL,EACJM,cAAeH,EAASP,QAAQW,SAK7B/D,EAAAmD,WAAWQ,EAASP,SAC3BpD,EAAOqD,YAAYlD,MAGnBe,YAAW,KACT,MAAM8C,EAAQnD,EAASoD,WAAW9C,cAAc,UAC5C6C,GACIA,EAAAE,UAAUC,OAAO,OACzC,GACiB,KAGMtD,EAAAsB,oBAAoB,cAAemB,IAEpCtC,QAAAQ,KACN,uDACAgC,EAGhB,MACoBxC,QAAAQ,KACN,6DAEd,EAIiBX,EAAAD,iBAAiB,cAAe0C,GAGnC,MAAAc,EAA0Bb,UACxB,MAAAc,EAAmB,OAAAC,EAAMf,EAAAE,aAAQ,EAAAa,EAAAlB,QAEnCZ,GACMxB,QAAAM,IACN,uDACAiC,EAAME,QAKNY,IACFrE,EAAOmD,WAAWkB,GAClBrE,EAAOqD,YAAYlD,MAGVU,EAAAsB,oBACP,uBACAiC,GAEd,EAIiBvD,EAAAD,iBACP,uBACAwD,GAIgC,mBAAvBvD,EAASE,UAClBF,EAASE,YAEDC,QAAAC,MACN,6DAGL,IAIIjB,EAAAuE,WAAW,mBAAmB,SAAUnB,GACzCA,IACFpD,EAAOmD,WAAWC,GAClBpD,EAAOqD,YAAYlD,MAEfqC,GACFxB,QAAQM,IAAI,gDAGtB,IAGW,CACLkD,YAAa,WACJ,MAAA,CACLC,KAAM,mBACNC,IAAK,mDAER,EAEJ,CACH"}