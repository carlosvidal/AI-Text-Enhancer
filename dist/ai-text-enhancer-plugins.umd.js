!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).AITextEnhancerPlugins={})}(this,(function(n){"use strict";n.CKEditorPlugin=function(n={}){const{enhancerId:e,buttonTooltip:t="Mejorar con IA"}=n;return function(n){n.ui.componentFactory.add("aienhancer",(()=>{const n=document.createElement("button");return n.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n        <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>\n        <path d="m14 7 3 3"/>\n      </svg>',n.title=t,n.className="ck ck-button",n.style.cssText="\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        background: #f0f0f0;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        padding: 4px;\n        cursor: pointer;\n        margin: 2px;\n      ",n.addEventListener("click",(()=>{const n=document.getElementById(e);n&&"function"==typeof n.openModal?n.openModal():console.error(`AI Text Enhancer with ID "${e}" not found or not initialized`)})),n})),setTimeout((()=>{try{if(document.querySelector(".ck-editor__main")){const n=document.querySelector(".ck-toolbar");if(n&&!n.querySelector(".ai-enhancer-button")){const o=document.createElement("button");o.className="ck ck-button ai-enhancer-button",o.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16">\n                <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>\n                <path d="m14 7 3 3"/>\n              </svg>',o.title=t,o.addEventListener("click",(()=>{const n=document.getElementById(e);n&&"function"==typeof n.openModal?n.openModal():console.error(`AI Text Enhancer with ID "${e}" not found or not initialized`)})),n.appendChild(o),console.log("CKEditor AI enhancer button added")}}}catch(n){console.error("Error adding button to CKEditor:",n)}}),500)}},n.FroalaPlugin=function(n={}){const{enhancerId:e,buttonTooltip:t="Mejorar con IA"}=n;return function(){setTimeout((()=>{try{const n=document.querySelector(".fr-box");if(!n)return void console.warn("Froala container not found");const o=n.querySelector(".fr-toolbar");if(!o)return void console.warn("Froala toolbar not found");if(o.querySelector(".ai-enhancer-button"))return;const r=document.createElement("div");r.className="fr-btn-grp";const i=document.createElement("button");i.className="fr-command fr-btn ai-enhancer-button",i.title=t,i.innerHTML='\n          <svg viewBox="0 0 24 24" width="16" height="16">\n            <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>\n            <path d="m14 7 3 3"/>\n          </svg>\n        ',i.addEventListener("click",(()=>{const n=document.getElementById(e);n&&"function"==typeof n.openModal?n.openModal():console.error(`AI Text Enhancer with ID "${e}" not found or not initialized`)})),r.appendChild(i);const a=o.querySelector(".fr-btn-grp:last-child");a?o.insertBefore(r,a.nextSibling):o.appendChild(r),console.log("Froala AI enhancer button added successfully")}catch(n){console.error("Error adding button to Froala:",n)}}),1e3)}},n.QuillPlugin=function(n={}){const{enhancerId:e,buttonTooltip:t="Mejorar con IA",iconHTML:o='<svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg">\n      <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>\n      <path d="m14 7 3 3"/>\n    </svg>'}=n;return function(n){function r(n){const r=document.createElement("button");r.className="ql-ai-enhancer",r.innerHTML=o,r.title=t,r.style.cssText="\n        display: inline-block;\n        height: 24px;\n        width: 28px;\n        background: transparent;\n        border: none;\n        cursor: pointer;\n        padding: 3px;\n        position: relative;\n      ",r.addEventListener("click",(()=>{const n=document.getElementById(e);n&&"function"==typeof n.openModal?n.openModal():console.error(`AI Text Enhancer with ID "${e}" not found or not initialized`)})),n.appendChild(r),console.log("Quill AI enhancer button added successfully")}return setTimeout((()=>{try{const e=n.container,t=e.querySelector(".ql-toolbar");if(!t)return console.warn("Quill toolbar not found, waiting..."),void setTimeout((()=>{const n=e.querySelector(".ql-toolbar");n?r(n):console.error("Quill toolbar not found after retry")}),500);r(t)}catch(e){console.error("Error initializing Quill plugin:",e)}}),100),{destroy:function(){const e=n.container.querySelector(".ql-ai-enhancer");e&&(e.removeEventListener("click"),e.parentNode.removeChild(e))}}}},n.TinyMCEPlugin=function(n={}){const{enhancerId:e,buttonTooltip:t="Mejorar con IA",buttonText:o="IA",buttonIcon:r='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/><path d="m14 7 3 3"/></svg>',debug:i=!1}=n;return function(n){return n.ui.registry.addButton("aienhancer",{icon:"magic",tooltip:t,text:o,onAction:function(){i&&console.log("[TinyMCEPlugin] AI enhancer button clicked"),n.selection.getContent(),n.getContent();const t=document.getElementById(e);if(!t)return void console.error(`[TinyMCEPlugin] AI Text Enhancer with ID "${e}" not found`);t.isInitialized||"function"!=typeof t.initializeComponents||(console.log("[TinyMCEPlugin] Initializing AI Text Enhancer component"),t.initializeComponents()),t.editorAdapter?(t.editorAdapter.getContent=function(){return n.getContent()},t.editorAdapter.setContent=function(e){return!!e&&(n.setContent(e),n.undoManager.add(),!0)},i&&console.log("[TinyMCEPlugin] Editor adapter methods overridden")):console.warn("[TinyMCEPlugin] Editor adapter not available in enhancer");const o=e=>{const{responseId:r}=e.detail||{};if(i&&console.log("[TinyMCEPlugin] Received responseUse event:",e.detail),t.responseHistory){const e=t.responseHistory.getResponse(r);e&&e.content?(i&&console.log("[TinyMCEPlugin] Setting content from response:",{id:r,contentLength:e.content.length}),n.setContent(e.content),n.undoManager.add(),setTimeout((()=>{const n=t.shadowRoot.querySelector(".modal");n&&n.classList.remove("open")}),100),t.removeEventListener("responseUse",o)):console.warn("[TinyMCEPlugin] Response not found or content empty:",r)}else console.warn("[TinyMCEPlugin] Response history not available in enhancer")};t.addEventListener("responseUse",o);const r=e=>{var o;const a=null==(o=e.detail)?void 0:o.content;i&&console.log("[TinyMCEPlugin] Received ai-content-generated event:",e.detail),a&&(n.setContent(a),n.undoManager.add(),t.removeEventListener("ai-content-generated",r))};t.addEventListener("ai-content-generated",r),"function"==typeof t.openModal?t.openModal():console.error("[TinyMCEPlugin] openModal method not available on enhancer")}}),n.addCommand("insertAIContent",(function(e){e&&(n.setContent(e),n.undoManager.add(),i&&console.log("[TinyMCEPlugin] Content inserted via command"))})),{getMetadata:function(){return{name:"AI Text Enhancer",url:"https://github.com/yourusername/ai-text-enhancer"}}}}},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=ai-text-enhancer-plugins.umd.js.map
